// GENERATION_BEHAVIOR: overwrite
// Code generated by protoc-gen-anything. DO NOT EDIT.
// source: notebooklm/v1alpha1/orchestration.proto

package service

import (
	"context"
	"encoding/json"
	"fmt"

	"github.com/dylan-isaac/nlm/gen/method"
	notebooklmv1alpha1 "github.com/dylan-isaac/nlm/gen/notebooklm/v1alpha1"
	"github.com/dylan-isaac/nlm/internal/batchexecute"
	"github.com/dylan-isaac/nlm/internal/beprotojson"
	"github.com/dylan-isaac/nlm/internal/rpc"
	"github.com/dylan-isaac/nlm/internal/rpc/grpcendpoint"
	"google.golang.org/protobuf/types/known/emptypb"
)

// LabsTailwindOrchestrationServiceClient is a generated client for the LabsTailwindOrchestrationService service.
type LabsTailwindOrchestrationServiceClient struct {
	rpcClient  *rpc.Client
	grpcClient *grpcendpoint.Client
}

// NewLabsTailwindOrchestrationServiceClient creates a new client for the LabsTailwindOrchestrationService service.
func NewLabsTailwindOrchestrationServiceClient(authToken, cookies string, opts ...batchexecute.Option) *LabsTailwindOrchestrationServiceClient {
	rpcClient := rpc.New(authToken, cookies, opts...)

	// Bridge batchexecute options to grpcendpoint options
	cfg := rpcClient.Config
	var grpcOpts []grpcendpoint.Option
	if cfg.Debug {
		grpcOpts = append(grpcOpts, grpcendpoint.WithDebug(true))
	}
	if len(cfg.Headers) > 0 {
		grpcOpts = append(grpcOpts, grpcendpoint.WithHeaders(cfg.Headers))
	}
	if len(cfg.URLParams) > 0 {
		grpcOpts = append(grpcOpts, grpcendpoint.WithURLParams(cfg.URLParams))
	}

	return &LabsTailwindOrchestrationServiceClient{
		rpcClient:  rpcClient,
		grpcClient: grpcendpoint.NewClient(authToken, cookies, grpcOpts...),
	}
}

// CreateArtifact calls the CreateArtifact RPC method.
func (c *LabsTailwindOrchestrationServiceClient) CreateArtifact(ctx context.Context, req *notebooklmv1alpha1.CreateArtifactRequest) (*notebooklmv1alpha1.Artifact, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "xpWGLf",
		Args: method.EncodeCreateArtifactArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("CreateArtifact: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Artifact
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("CreateArtifact: unmarshal response: %w", err)
	}

	return &result, nil
}

// GetArtifact calls the GetArtifact RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GetArtifact(ctx context.Context, req *notebooklmv1alpha1.GetArtifactRequest) (*notebooklmv1alpha1.Artifact, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "BnLyuf",
		Args: method.EncodeGetArtifactArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GetArtifact: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Artifact
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GetArtifact: unmarshal response: %w", err)
	}

	return &result, nil
}

// UpdateArtifact calls the UpdateArtifact RPC method.
func (c *LabsTailwindOrchestrationServiceClient) UpdateArtifact(ctx context.Context, req *notebooklmv1alpha1.UpdateArtifactRequest) (*notebooklmv1alpha1.Artifact, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "DJezBc",
		Args: method.EncodeUpdateArtifactArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("UpdateArtifact: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Artifact
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("UpdateArtifact: unmarshal response: %w", err)
	}

	return &result, nil
}

// RenameArtifact calls the RenameArtifact RPC method.
func (c *LabsTailwindOrchestrationServiceClient) RenameArtifact(ctx context.Context, req *notebooklmv1alpha1.RenameArtifactRequest) (*notebooklmv1alpha1.Artifact, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "rc3d8d",
		Args: []interface{}{}, // TODO: implement argument encoding
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("RenameArtifact: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Artifact
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("RenameArtifact: unmarshal response: %w", err)
	}

	return &result, nil
}

// DeleteArtifact calls the DeleteArtifact RPC method.
func (c *LabsTailwindOrchestrationServiceClient) DeleteArtifact(ctx context.Context, req *notebooklmv1alpha1.DeleteArtifactRequest) (*emptypb.Empty, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "WxBZtb",
		Args: method.EncodeDeleteArtifactArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("DeleteArtifact: %w", err)
	}

	// Decode the response
	var result emptypb.Empty
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("DeleteArtifact: unmarshal response: %w", err)
	}

	return &result, nil
}

// ListArtifacts calls the ListArtifacts RPC method.
func (c *LabsTailwindOrchestrationServiceClient) ListArtifacts(ctx context.Context, req *notebooklmv1alpha1.ListArtifactsRequest) (*notebooklmv1alpha1.ListArtifactsResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "LfTXoe",
		Args: method.EncodeListArtifactsArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("ListArtifacts: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.ListArtifactsResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("ListArtifacts: unmarshal response: %w", err)
	}

	return &result, nil
}

// ActOnSources calls the ActOnSources RPC method.
func (c *LabsTailwindOrchestrationServiceClient) ActOnSources(ctx context.Context, req *notebooklmv1alpha1.ActOnSourcesRequest) (*emptypb.Empty, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "yyryJe",
		Args: method.EncodeActOnSourcesArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("ActOnSources: %w", err)
	}

	// Decode the response
	var result emptypb.Empty
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("ActOnSources: unmarshal response: %w", err)
	}

	return &result, nil
}

// AddSources calls the AddSources RPC method.
func (c *LabsTailwindOrchestrationServiceClient) AddSources(ctx context.Context, req *notebooklmv1alpha1.AddSourceRequest) (*notebooklmv1alpha1.Project, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "izAoDd",
		Args: method.EncodeAddSourcesArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("AddSources: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Project
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("AddSources: unmarshal response: %w", err)
	}

	return &result, nil
}

// CheckSourceFreshness calls the CheckSourceFreshness RPC method.
func (c *LabsTailwindOrchestrationServiceClient) CheckSourceFreshness(ctx context.Context, req *notebooklmv1alpha1.CheckSourceFreshnessRequest) (*notebooklmv1alpha1.CheckSourceFreshnessResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "yR9Yof",
		Args: method.EncodeCheckSourceFreshnessArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("CheckSourceFreshness: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.CheckSourceFreshnessResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("CheckSourceFreshness: unmarshal response: %w", err)
	}

	return &result, nil
}

// DeleteSources calls the DeleteSources RPC method.
func (c *LabsTailwindOrchestrationServiceClient) DeleteSources(ctx context.Context, req *notebooklmv1alpha1.DeleteSourcesRequest) (*emptypb.Empty, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "tGMBJ",
		Args: method.EncodeDeleteSourcesArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("DeleteSources: %w", err)
	}

	// Decode the response
	var result emptypb.Empty
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("DeleteSources: unmarshal response: %w", err)
	}

	return &result, nil
}

// DiscoverSources calls the DiscoverSources RPC method.
func (c *LabsTailwindOrchestrationServiceClient) DiscoverSources(ctx context.Context, req *notebooklmv1alpha1.DiscoverSourcesRequest) (*notebooklmv1alpha1.DiscoverSourcesResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "qXyaNe",
		Args: method.EncodeDiscoverSourcesArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("DiscoverSources: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.DiscoverSourcesResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("DiscoverSources: unmarshal response: %w", err)
	}

	return &result, nil
}

// LoadSource calls the LoadSource RPC method.
func (c *LabsTailwindOrchestrationServiceClient) LoadSource(ctx context.Context, req *notebooklmv1alpha1.LoadSourceRequest) (*notebooklmv1alpha1.Source, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "hizoJc",
		Args: method.EncodeLoadSourceArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("LoadSource: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Source
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("LoadSource: unmarshal response: %w", err)
	}

	return &result, nil
}

// MutateSource calls the MutateSource RPC method.
func (c *LabsTailwindOrchestrationServiceClient) MutateSource(ctx context.Context, req *notebooklmv1alpha1.MutateSourceRequest) (*notebooklmv1alpha1.Source, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "b7Wfje",
		Args: method.EncodeMutateSourceArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("MutateSource: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Source
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("MutateSource: unmarshal response: %w", err)
	}

	return &result, nil
}

// RefreshSource calls the RefreshSource RPC method.
func (c *LabsTailwindOrchestrationServiceClient) RefreshSource(ctx context.Context, req *notebooklmv1alpha1.RefreshSourceRequest) (*notebooklmv1alpha1.Source, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "FLmJqe",
		Args: method.EncodeRefreshSourceArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("RefreshSource: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Source
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("RefreshSource: unmarshal response: %w", err)
	}

	return &result, nil
}

// CreateAudioOverview calls the CreateAudioOverview RPC method.
func (c *LabsTailwindOrchestrationServiceClient) CreateAudioOverview(ctx context.Context, req *notebooklmv1alpha1.CreateAudioOverviewRequest) (*notebooklmv1alpha1.AudioOverview, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "AHyHrd",
		Args: method.EncodeCreateAudioOverviewArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("CreateAudioOverview: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.AudioOverview
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("CreateAudioOverview: unmarshal response: %w", err)
	}

	return &result, nil
}

// GetAudioOverview calls the GetAudioOverview RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GetAudioOverview(ctx context.Context, req *notebooklmv1alpha1.GetAudioOverviewRequest) (*notebooklmv1alpha1.AudioOverview, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "VUsiyb",
		Args: method.EncodeGetAudioOverviewArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GetAudioOverview: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.AudioOverview
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GetAudioOverview: unmarshal response: %w", err)
	}

	return &result, nil
}

// DeleteAudioOverview calls the DeleteAudioOverview RPC method.
func (c *LabsTailwindOrchestrationServiceClient) DeleteAudioOverview(ctx context.Context, req *notebooklmv1alpha1.DeleteAudioOverviewRequest) (*emptypb.Empty, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "sJDbic",
		Args: method.EncodeDeleteAudioOverviewArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("DeleteAudioOverview: %w", err)
	}

	// Decode the response
	var result emptypb.Empty
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("DeleteAudioOverview: unmarshal response: %w", err)
	}

	return &result, nil
}

// CreateNote calls the CreateNote RPC method.
func (c *LabsTailwindOrchestrationServiceClient) CreateNote(ctx context.Context, req *notebooklmv1alpha1.CreateNoteRequest) (*notebooklmv1alpha1.Source, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "CYK0Xb",
		Args: method.EncodeCreateNoteArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("CreateNote: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Source
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("CreateNote: unmarshal response: %w", err)
	}

	return &result, nil
}

// DeleteNotes calls the DeleteNotes RPC method.
func (c *LabsTailwindOrchestrationServiceClient) DeleteNotes(ctx context.Context, req *notebooklmv1alpha1.DeleteNotesRequest) (*emptypb.Empty, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "AH0mwd",
		Args: method.EncodeDeleteNotesArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("DeleteNotes: %w", err)
	}

	// Decode the response
	var result emptypb.Empty
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("DeleteNotes: unmarshal response: %w", err)
	}

	return &result, nil
}

// GetNotes calls the GetNotes RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GetNotes(ctx context.Context, req *notebooklmv1alpha1.GetNotesRequest) (*notebooklmv1alpha1.GetNotesResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "cFji9",
		Args: method.EncodeGetNotesArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GetNotes: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.GetNotesResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GetNotes: unmarshal response: %w", err)
	}

	return &result, nil
}

// MutateNote calls the MutateNote RPC method.
func (c *LabsTailwindOrchestrationServiceClient) MutateNote(ctx context.Context, req *notebooklmv1alpha1.MutateNoteRequest) (*notebooklmv1alpha1.Source, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "cYAfTb",
		Args: method.EncodeMutateNoteArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("MutateNote: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Source
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("MutateNote: unmarshal response: %w", err)
	}

	return &result, nil
}

// CreateProject calls the CreateProject RPC method.
func (c *LabsTailwindOrchestrationServiceClient) CreateProject(ctx context.Context, req *notebooklmv1alpha1.CreateProjectRequest) (*notebooklmv1alpha1.Project, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "CCqFvf",
		Args: method.EncodeCreateProjectArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("CreateProject: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Project
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("CreateProject: unmarshal response: %w", err)
	}

	return &result, nil
}

// DeleteProjects calls the DeleteProjects RPC method.
func (c *LabsTailwindOrchestrationServiceClient) DeleteProjects(ctx context.Context, req *notebooklmv1alpha1.DeleteProjectsRequest) (*emptypb.Empty, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "WWINqb",
		Args: method.EncodeDeleteProjectsArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("DeleteProjects: %w", err)
	}

	// Decode the response
	var result emptypb.Empty
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("DeleteProjects: unmarshal response: %w", err)
	}

	return &result, nil
}

// GetProject calls the GetProject RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GetProject(ctx context.Context, req *notebooklmv1alpha1.GetProjectRequest) (*notebooklmv1alpha1.Project, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "rLM1Ne",
		Args: method.EncodeGetProjectArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GetProject: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Project
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GetProject: unmarshal response: %w", err)
	}

	return &result, nil
}

// ListFeaturedProjects calls the ListFeaturedProjects RPC method.
func (c *LabsTailwindOrchestrationServiceClient) ListFeaturedProjects(ctx context.Context, req *notebooklmv1alpha1.ListFeaturedProjectsRequest) (*notebooklmv1alpha1.ListFeaturedProjectsResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "nS9Qlc",
		Args: method.EncodeListFeaturedProjectsArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("ListFeaturedProjects: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.ListFeaturedProjectsResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("ListFeaturedProjects: unmarshal response: %w", err)
	}

	return &result, nil
}

// ListRecentlyViewedProjects calls the ListRecentlyViewedProjects RPC method.
func (c *LabsTailwindOrchestrationServiceClient) ListRecentlyViewedProjects(ctx context.Context, req *notebooklmv1alpha1.ListRecentlyViewedProjectsRequest) (*notebooklmv1alpha1.ListRecentlyViewedProjectsResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "wXbhsf",
		Args: method.EncodeListRecentlyViewedProjectsArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("ListRecentlyViewedProjects: %w", err)
	}

	// The response is an array of projects directly, but we need to wrap it
	// in a response message that has 'projects' as field 1
	// Create a wrapped response: [projects_array]
	wrappedResp := fmt.Sprintf("[%s]", string(resp))

	// Decode the response
	var result notebooklmv1alpha1.ListRecentlyViewedProjectsResponse
	if err := beprotojson.Unmarshal([]byte(wrappedResp), &result); err != nil {
		return nil, fmt.Errorf("ListRecentlyViewedProjects: unmarshal response: %w", err)
	}

	return &result, nil
}

// MutateProject calls the MutateProject RPC method.
func (c *LabsTailwindOrchestrationServiceClient) MutateProject(ctx context.Context, req *notebooklmv1alpha1.MutateProjectRequest) (*notebooklmv1alpha1.Project, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "s0tc2d",
		Args: method.EncodeMutateProjectArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("MutateProject: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Project
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("MutateProject: unmarshal response: %w", err)
	}

	return &result, nil
}

// RemoveRecentlyViewedProject calls the RemoveRecentlyViewedProject RPC method.
func (c *LabsTailwindOrchestrationServiceClient) RemoveRecentlyViewedProject(ctx context.Context, req *notebooklmv1alpha1.RemoveRecentlyViewedProjectRequest) (*emptypb.Empty, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "fejl7e",
		Args: method.EncodeRemoveRecentlyViewedProjectArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("RemoveRecentlyViewedProject: %w", err)
	}

	// Decode the response
	var result emptypb.Empty
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("RemoveRecentlyViewedProject: unmarshal response: %w", err)
	}

	return &result, nil
}

// GenerateDocumentGuides calls the GenerateDocumentGuides RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GenerateDocumentGuides(ctx context.Context, req *notebooklmv1alpha1.GenerateDocumentGuidesRequest) (*notebooklmv1alpha1.GenerateDocumentGuidesResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "tr032e",
		Args: method.EncodeGenerateDocumentGuidesArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GenerateDocumentGuides: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.GenerateDocumentGuidesResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GenerateDocumentGuides: unmarshal response: %w", err)
	}

	return &result, nil
}

// GenerateFreeFormStreamed calls the GenerateFreeFormStreamed RPC method
// via the gRPC-Web endpoint (the old batchexecute RPC ID "BD" now returns 400).
func (c *LabsTailwindOrchestrationServiceClient) GenerateFreeFormStreamed(ctx context.Context, req *notebooklmv1alpha1.GenerateFreeFormStreamedRequest) (*notebooklmv1alpha1.GenerateFreeFormStreamedResponse, error) {
	// Build source array: each source is [["sourceId"]] (double-wrapped)
	sources := make([]interface{}, len(req.SourceIds))
	for i, id := range req.SourceIds {
		sources[i] = []interface{}{[]interface{}{id}}
	}

	// Build inner args matching the gRPC-Web endpoint format:
	// [sources, prompt, conv_history, mode, session_id, null, null, project_id]
	innerArgs := []interface{}{
		sources,        // position 0: source array
		req.Prompt,     // position 1: prompt
		nil,            // position 2: conversation history (null for first message)
		[]interface{}{2}, // position 3: mode
		nil,            // position 4: session/conversation ID (null for first)
		nil,            // position 5
		nil,            // position 6
		req.ProjectId,  // position 7: project/notebook ID
	}

	// Stringify the inner args and wrap in [null, "<json>"] envelope
	innerJSON, err := json.Marshal(innerArgs)
	if err != nil {
		return nil, fmt.Errorf("GenerateFreeFormStreamed: marshal args: %w", err)
	}
	body := []interface{}{nil, string(innerJSON)}

	grpcReq := grpcendpoint.Request{
		Endpoint: "/google.internal.labs.tailwind.orchestration.v1.LabsTailwindOrchestrationService/GenerateFreeFormStreamed",
		Body:     body,
	}

	// Execute via gRPC-Web endpoint
	resp, err := c.grpcClient.ExecuteRPC(grpcReq)
	if err != nil {
		return nil, fmt.Errorf("GenerateFreeFormStreamed: %w", err)
	}

	// Parse the response directly from JSON.
	// The gRPC-Web response format is: [[text], metadata, citations, null, is_final]
	// Position 0 contains the response text, potentially nested in arrays.
	var outer []json.RawMessage
	if err := json.Unmarshal(resp, &outer); err != nil {
		return nil, fmt.Errorf("GenerateFreeFormStreamed: unmarshal outer: %w", err)
	}
	if len(outer) == 0 {
		return nil, fmt.Errorf("GenerateFreeFormStreamed: empty response array")
	}

	// Extract text from position 0, unwrapping nested arrays until we find a string
	chunk := extractText(outer[0])

	// Position 4 (if present) is is_final bool
	isFinal := false
	if len(outer) > 4 {
		_ = json.Unmarshal(outer[4], &isFinal) // ignore error, default false
	}

	return &notebooklmv1alpha1.GenerateFreeFormStreamedResponse{
		Chunk:   chunk,
		IsFinal: isFinal,
	}, nil
}

// GenerateNotebookGuide calls the GenerateNotebookGuide RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GenerateNotebookGuide(ctx context.Context, req *notebooklmv1alpha1.GenerateNotebookGuideRequest) (*notebooklmv1alpha1.GenerateNotebookGuideResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "VfAZjd",
		Args: method.EncodeGenerateNotebookGuideArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GenerateNotebookGuide: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.GenerateNotebookGuideResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GenerateNotebookGuide: unmarshal response: %w", err)
	}

	return &result, nil
}

// GenerateOutline calls the GenerateOutline RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GenerateOutline(ctx context.Context, req *notebooklmv1alpha1.GenerateOutlineRequest) (*notebooklmv1alpha1.GenerateOutlineResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "lCjAd",
		Args: method.EncodeGenerateOutlineArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GenerateOutline: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.GenerateOutlineResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GenerateOutline: unmarshal response: %w", err)
	}

	return &result, nil
}

// GenerateReportSuggestions calls the GenerateReportSuggestions RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GenerateReportSuggestions(ctx context.Context, req *notebooklmv1alpha1.GenerateReportSuggestionsRequest) (*notebooklmv1alpha1.GenerateReportSuggestionsResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "GHsKob",
		Args: method.EncodeGenerateReportSuggestionsArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GenerateReportSuggestions: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.GenerateReportSuggestionsResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GenerateReportSuggestions: unmarshal response: %w", err)
	}

	return &result, nil
}

// GenerateSection calls the GenerateSection RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GenerateSection(ctx context.Context, req *notebooklmv1alpha1.GenerateSectionRequest) (*notebooklmv1alpha1.GenerateSectionResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "BeTrYd",
		Args: method.EncodeGenerateSectionArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GenerateSection: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.GenerateSectionResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GenerateSection: unmarshal response: %w", err)
	}

	return &result, nil
}

// StartDraft calls the StartDraft RPC method.
func (c *LabsTailwindOrchestrationServiceClient) StartDraft(ctx context.Context, req *notebooklmv1alpha1.StartDraftRequest) (*notebooklmv1alpha1.StartDraftResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "exXvGf",
		Args: method.EncodeStartDraftArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("StartDraft: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.StartDraftResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("StartDraft: unmarshal response: %w", err)
	}

	return &result, nil
}

// StartSection calls the StartSection RPC method.
func (c *LabsTailwindOrchestrationServiceClient) StartSection(ctx context.Context, req *notebooklmv1alpha1.StartSectionRequest) (*notebooklmv1alpha1.StartSectionResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "pGC7gf",
		Args: method.EncodeStartSectionArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("StartSection: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.StartSectionResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("StartSection: unmarshal response: %w", err)
	}

	return &result, nil
}

// GenerateMagicView calls the GenerateMagicView RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GenerateMagicView(ctx context.Context, req *notebooklmv1alpha1.GenerateMagicViewRequest) (*notebooklmv1alpha1.GenerateMagicViewResponse, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "uK8f7c",
		Args: method.EncodeGenerateMagicViewArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GenerateMagicView: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.GenerateMagicViewResponse
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GenerateMagicView: unmarshal response: %w", err)
	}

	return &result, nil
}

// GetProjectAnalytics calls the GetProjectAnalytics RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GetProjectAnalytics(ctx context.Context, req *notebooklmv1alpha1.GetProjectAnalyticsRequest) (*notebooklmv1alpha1.ProjectAnalytics, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "AUrzMb",
		Args: method.EncodeGetProjectAnalyticsArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GetProjectAnalytics: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.ProjectAnalytics
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GetProjectAnalytics: unmarshal response: %w", err)
	}

	return &result, nil
}

// SubmitFeedback calls the SubmitFeedback RPC method.
func (c *LabsTailwindOrchestrationServiceClient) SubmitFeedback(ctx context.Context, req *notebooklmv1alpha1.SubmitFeedbackRequest) (*emptypb.Empty, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "uNyJKe",
		Args: method.EncodeSubmitFeedbackArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("SubmitFeedback: %w", err)
	}

	// Decode the response
	var result emptypb.Empty
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("SubmitFeedback: unmarshal response: %w", err)
	}

	return &result, nil
}

// GetOrCreateAccount calls the GetOrCreateAccount RPC method.
func (c *LabsTailwindOrchestrationServiceClient) GetOrCreateAccount(ctx context.Context, req *notebooklmv1alpha1.GetOrCreateAccountRequest) (*notebooklmv1alpha1.Account, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "ZwVcOc",
		Args: method.EncodeGetOrCreateAccountArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("GetOrCreateAccount: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Account
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("GetOrCreateAccount: unmarshal response: %w", err)
	}

	return &result, nil
}

// MutateAccount calls the MutateAccount RPC method.
func (c *LabsTailwindOrchestrationServiceClient) MutateAccount(ctx context.Context, req *notebooklmv1alpha1.MutateAccountRequest) (*notebooklmv1alpha1.Account, error) {
	// Build the RPC call
	call := rpc.Call{
		ID:   "hT54vc",
		Args: method.EncodeMutateAccountArgs(req),
	}

	// Execute the RPC
	resp, err := c.rpcClient.Do(call)
	if err != nil {
		return nil, fmt.Errorf("MutateAccount: %w", err)
	}

	// Decode the response
	var result notebooklmv1alpha1.Account
	if err := beprotojson.Unmarshal(resp, &result); err != nil {
		return nil, fmt.Errorf("MutateAccount: unmarshal response: %w", err)
	}

	return &result, nil
}

// extractText unwraps nested JSON arrays to find the first string value.
// Handles formats like "text", ["text"], [["text"]], or deeper nesting.
func extractText(raw json.RawMessage) string {
	// Try as a plain string first
	var s string
	if json.Unmarshal(raw, &s) == nil {
		return s
	}

	// Try as an array and recurse into the first element
	var arr []json.RawMessage
	if json.Unmarshal(raw, &arr) == nil && len(arr) > 0 {
		return extractText(arr[0])
	}

	return ""
}
